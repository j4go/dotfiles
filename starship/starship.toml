# ==========================================================================
# Starship 0.11+ Optimized Config (Aligned with Nix & macOS Workflow)
# ==========================================================================

# 1. åŸºç¡€å…¨å±€è®¾ç½®
add_newline = true
command_timeout = 1000

# 2. æ ¸å¿ƒæ ¼å¼å®šä¹‰ (ä¸¥æ ¼æŒ‰ç…§ Nix é€»è¾‘æ’åºï¼Œå¹¶åŠ å…¥è€—æ—¶ç›‘æ§)
format = """
$username\
$hostname\
$directory\
$git_branch\
$git_status\
$conda\
$python\
$cmd_duration\
$line_break\
$character"""

# --------------------------------------------------------------------------
# æ¨¡å—ç»†èŠ‚é…ç½®
# --------------------------------------------------------------------------

[username]
show_always = false
format = "[$user]($style) @"
style_user = "white dim"

[hostname]
ssh_only = true
format = "[$hostname]($style) "
style = "bold green"

[directory]
truncation_length = 0      # æ°¸ä¸ç¼©å†™è·¯å¾„
truncate_to_repo = false   # å³ä½¿åœ¨ Git åº“å†…ä¹Ÿæ˜¾ç¤ºç›¸å¯¹äº $HOME çš„å…¨è·¯å¾„
style = "bold cyan"
format = "[$path]($style) "

[git_branch]
symbol = "ï˜ "
format = "[$symbol$branch]($style) "
style = "bold purple"

[git_status]
format = "[$all]($style) "
style = "bold red"
up_to_date = "[âœ“](bold green)"

[conda]
symbol = "ó±†  "
format = "via [$symbol$environment]($style) "
style = "bold dim magenta"

[python]
symbol = "ğŸ "
format = "[$symbol($version )]($style)"
style = "bold yellow"
# ä»…åœ¨å…³é”®é…ç½®æ–‡ä»¶å­˜åœ¨æ—¶è§¦å‘ï¼Œé¿å…å¹²æ‰°
detect_files = ["pyproject.toml", "requirements.txt"]

[cmd_duration]
min_time = 2000           # ä»…æ˜¾ç¤ºè€—æ—¶è¶…è¿‡ 2 ç§’çš„å‘½ä»¤
format = "took [$duration]($style) "
style = "yellow italic"   # ä½¿ç”¨é»„è‰²æ–œä½“ä»¥ç¤ºåŒºåˆ†

[character]
success_symbol = "[â¯](bold green)"
error_symbol = "[â¯](bold red)"

# --------------------------------------------------------------------------
# ç¦ç”¨å†—ä½™æ¨¡å— (ä¿æŒç•Œé¢æ¸…çˆ½)
# --------------------------------------------------------------------------

[os]
disabled = true

[package]
disabled = true

[nix_shell]
disabled = true

[line_break]
disabled = false
