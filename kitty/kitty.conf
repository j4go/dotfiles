# ——————————————————————————————————————————————————————————————————————
# 布局引擎设置
# ——————————————————————————————————————————————————————————————————————
# 必须启用 splits 布局，cmd+d/r 的方向指定才会生效
# 将 splits 设为默认，同时保留 stack (全屏模式) 和 tall (平铺模式) 备用
enabled_layouts splits:default, stack, tall

# 终端类型修复：解决 "terminal is not fully functional" 报错
# 伪装成标准 xterm，确保 ssh 和 git log 等命令在任何地方都正常
term xterm-256color
shell_integration enabled

# 禁止在 macOS 菜单栏显示窗口标题
# 默认值通常是 all 或 menubar，设置为 none 即可彻底去掉右侧文字
macos_show_window_title_in none

# ——————————————————————————————————————————————————————————————————————
# 字体设置 (Maple Mono)
# ——————————————————————————————————————————————————————————————————————
font_family      Maple Mono NF CN
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        15.0
macos_thicken_font 0.45

# ——————————————————————————————————————————————————————————————————————
# 视觉与 UI (沉浸式布局优化)
# ——————————————————————————————————————————————————————————————————————
include current-theme.conf
window_padding_width 12
hide_window_decorations titlebar-only
background_opacity 0.88

# 增强：让非活动窗口稍微变暗，方便在分屏时区分焦点
inactive_text_alpha 0.9
# 增强：分屏边框颜色（可选，根据你的主题调整）
# active_border_color #00ff00

# ——————————————————————————————————————————————————————————————————————
# 标签页 (Powerline 风格)
# ——————————————————————————————————————————————————————————————————————
tab_bar_edge            top
tab_bar_style           powerline
tab_powerline_style     slanted
tab_title_template      "{index}: {title}"
active_tab_font_style   bold
inactive_tab_font_style normal

# ——————————————————————————————————————————————————————————————————————
# macOS 深度适配
# ——————————————————————————————————————————————————————————————————————
macos_option_as_alt yes
confirm_os_window_close 0
macos_quit_when_last_window_closed no

# ——————————————————————————————————————————————————————————————————————
# 鼠标行为
# ——————————————————————————————————————————————————————————————————————
copy_on_select yes
strip_trailing_spaces smart
mouse_map right press ungrabbed mouse_selection extend
mouse_map left doublepress ungrabbed mouse_selection word
mouse_map left triplepress ungrabbed mouse_selection line
mouse_map cmd+left release grabbed,ungrabbed mouse_handle_click link

# ——————————————————————————————————————————————————————————————————————
# 快捷键映射
# ——————————————————————————————————————————————————————————————————————
map ctrl+cmd+, load_config_file
map cmd+z no_op
map cmd+x no_op
map alt+x no_op

# 剪贴板
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard

# 标签页跳转
map cmd+t new_tab
map cmd+w close_tab
map cmd+shift+] next_tab
map cmd+shift+[ previous_tab
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6

# ——————————————————————————————————————————————————————————————————————
# 分屏管理 
# ——————————————————————————————————————————————————————————————————————
# 1. 开启新分屏 (保持当前路径)
map cmd+r launch --location=vsplit --cwd=current
map cmd+d launch --location=hsplit --cwd=current
#map cmd+enter new_window

# 2. 窗口切换 (没有这个，分屏后很难切换焦点)
# 使用 Cmd + Option (手指顺位很舒服，且绝不冲突)
map opt+up    neighboring_window up
map opt+down  neighboring_window down
map opt+left  neighboring_window left
map opt+right neighboring_window right

# 3. 窗口调整 (新增：调整分屏大小)
map cmd+ctrl+up    resize_window taller
map cmd+ctrl+down  resize_window shorter
map cmd+ctrl+left  resize_window narrower
map cmd+ctrl+right resize_window wider
