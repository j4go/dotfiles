# ——————————————————————————————————————————————————————————————————————
# 字体设置 (Maple Mono NF CN)
# ——————————————————————————————————————————————————————————————————————
font_family      Maple Mono NF CN
# 取消粗体，强制使用常规体代替粗体，避免字体过粗
bold_font        Maple Mono NF CN
italic_font      auto
bold_italic_font Maple Mono NF CN
font_size        15.5

disable_ligatures always
# 如果你只想在鼠标滑过时显示连字（方便检查），可以改为：
# disable_ligatures cursor

# 显式禁用 Maple Mono 的连字功能和上下文替换
font_features MapleMono-NF-CN -liga -calt -clig -dlig

# 增加行高 (建议 110% - 120% 之间，115% 是黄金比例)
modify_font line_height 110%

# macOS 字体渲染微调：稍微降低加粗系数 (原 0.45 调至 0.3 甚至更低)，使字形更纤细
macos_thicken_font 0.15

# 微调基线，确保在加高的标签栏中文字视觉居中
modify_font baseline 1

# ——————————————————————————————————————————————————————————————————————
# 布局引擎
# ——————————————————————————————————————————————————————————————————————
enabled_layouts splits:default, stack, tall
term xterm-256color
shell_integration enabled

# ——————————————————————————————————————————————————————————————————————
# 标签栏 (高对比度、垂直拉伸方案)
# ——————————————————————————————————————————————————————————————————————
tab_bar_edge            top
tab_bar_style           powerline
tab_powerline_style     slanted
tab_bar_align           left

# 物理高度增强：第一个值增加顶部呼吸感，第二个值增加与下方内容间距
tab_bar_margin_height   10 8
tab_bar_margin_width    0

# 标题模版：保持紧凑
active_tab_title_template   " {title}"
inactive_tab_title_template "{title}"

# 标签栏字体
active_tab_font_style   bold
inactive_tab_font_style normal 

# 极端对比度色彩配置
active_tab_foreground   #000000
active_tab_background   #74c7ec
inactive_tab_foreground #a6adc8
inactive_tab_background #1e1e2e

tab_bar_background      none

# ——————————————————————————————————————————————————————————————————————
# 视觉与 UI (沉浸式)
# ——————————————————————————————————————————————————————————————————————
# theme: Everforest Dark Hard
include current-theme.conf
window_padding_width 12 12 12 2
hide_window_decorations titlebar-only
background_opacity 0.88
inactive_text_alpha 0.92
macos_show_window_title_in none

# ——————————————————————————————————————————————————————————————————————
# macOS 深度适配
# ——————————————————————————————————————————————————————————————————————
macos_option_as_alt yes
confirm_os_window_close 0
macos_quit_when_last_window_closed no

# ——————————————————————————————————————————————————————————————————————
# 鼠标行为
# ——————————————————————————————————————————————————————————————————————
copy_on_select yes
strip_trailing_spaces smart
mouse_map right press ungrabbed mouse_selection extend
mouse_map left doublepress ungrabbed mouse_selection word
mouse_map left triplepress ungrabbed mouse_selection line

# ——————————————————————————————————————————————————————————————————————
# 快捷键映射 (Keybindings)
# ——————————————————————————————————————————————————————————————————————
# 配置重载
map ctrl+cmd+, load_config_file

# 剪贴板
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard

# 标签页跳转
map cmd+t new_tab
map cmd+w close_tab
map cmd+shift+] next_tab
map cmd+shift+[ previous_tab
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6

# 分屏管理
map cmd+r launch --location=vsplit --cwd=current
map cmd+d launch --location=hsplit --cwd=current

# 窗口切换
map opt+up    neighboring_window up
map opt+down  neighboring_window down
map opt+left  neighboring_window left
map opt+right neighboring_window right

# 窗口尺寸调整
map cmd+ctrl+up    resize_window taller
map cmd+ctrl+down  resize_window shorter
map cmd+ctrl+left  resize_window narrower
map cmd+ctrl+right resize_window wider

# 禁用冲突键位
map cmd+z no_op
map cmd+x no_op
map alt+x no_op
